include ../../mixins/FilterStatus.pug
include ../../mixins/sort.pug
doctype html
html(lang="en")
  head
    link(
      crossorigin="anonymous" 
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" 
      rel="stylesheet" 
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      )
    link(rel="stylesheet", href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css")
    link(rel="stylesheet", href="/admin/css/ListProduct.css")
    script(src="https://cdn.jsdelivr.net/npm/sweetalert2@11.12.2/dist/sweetalert2.all.min.js")
    link(
      href="https://cdn.jsdelivr.net/npm/sweetalert2@11.12.2/dist/sweetalert2.min.css" 
      rel="stylesheet"
    )
    script(
      src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js" 
      type="text/javascript"
    )
    meta(http-equiv="X-UA-Compatible", content="IE=edge")
    meta(content="width=device-width,initial-scale=1,shrink-to-fit=no", name="viewport")
    link(rel="icon", href="/admin/img/kaiadmin/favicon.ico", type="image/x-icon")
    //  Fonts and icons 
    script(src="/admin/js/plugin/webfont/webfont.min.js")
    script.

      WebFont.load({
              google: { families: ["Public Sans:300,400,500,600,700"] },
              custom: {
                families: [
                  "Font Awesome 5 Solid",
                  "Font Awesome 5 Regular",
                  "Font Awesome 5 Brands",
                  "simple-line-icons",
                ],
                urls: [""],
              },
              active: function () {
                sessionStorage.fonts = true;
              },
            });
      
    //  CSS Files 
    link(rel="stylesheet", href="/admin/css/dashboard/bootstrap.min.css")
    link(rel="stylesheet", href="/admin/css/dashboard/plugins.min.css")
    link(rel="stylesheet", href="/admin/css/dashboard/kaiadmin.min.css")
    //  CSS Just for demo purpose, don't include it in your project 
    link(rel="stylesheet", href="/admin/css/dashboard/demo.css")
    .wrapper
      //  Sidebar 
      .sidebar(data-background-color="dark")
        .sidebar-logo
          //  Logo Header 
          .logo-header(data-background-color="dark")
            a.logo(href="index.html")
              img.navbar-brand(src="/imgs/tuta-high-resolution-logo (6).png", alt="navbar brand", height="20")
            .nav-toggle
              button.btn.btn-toggle.toggle-sidebar
                i.gg-menu-right
              button.btn.btn-toggle.sidenav-toggler
                i.gg-menu-left
            button.topbar-toggler.more
              i.gg-more-vertical-alt
          //  End Logo Header 
        .sidebar-wrapper.scrollbar.scrollbar-inner
          .sidebar-content
            ul.nav.nav-secondary
              li.nav-item.active
                a.collapsed(data-bs-toggle="collapse", href="#dashboard", aria-expanded="false")
                  i.fas.fa-home
                  p Trang Chủ
                  span.caret
                .collapse#dashboard
                  ul.nav.nav-collapse
                    li
                      a(href="../demo1/index.html")
                        span.sub-item 
              li.nav-section
                span.sidebar-mini-icon
                  i.fa.fa-ellipsis-h
                h4.text-section Components
              li.nav-item
                a(data-bs-toggle="collapse", href="#base")
                  i.fas.fa-layer-group
                  p Base
                  span.caret
                .collapse#base
                  ul.nav.nav-collapse
                    li
                      a(href="components/avatars.html")
                        span.sub-item Avatars
                    li
                      a(href="components/buttons.html")
                        span.sub-item Buttons
                    li
                      a(href="components/gridsystem.html")
                        span.sub-item Grid System
                    li
                      a(href="components/panels.html")
                        span.sub-item Panels
                    li
                      a(href="components/notifications.html")
                        span.sub-item Notifications
                    li
                      a(href="components/sweetalert.html")
                        span.sub-item Sweet Alert
                    li
                      a(href="components/font-awesome-icons.html")
                        span.sub-item Font Awesome Icons
                    li
                      a(href="components/simple-line-icons.html")
                        span.sub-item Simple Line Icons
                    li
                      a(href="components/typography.html")
                        span.sub-item Typography
              li.nav-item
                a(data-bs-toggle="collapse", href="#sidebarLayouts")
                  i.fas.fa-th-list
                  p Sidebar Layouts
                  span.caret
                .collapse#sidebarLayouts
                  ul.nav.nav-collapse
                    li
                      a(href="sidebar-style-2.html")
                        span.sub-item Sidebar Style 2
                    li
                      a(href="icon-menu.html")
                        span.sub-item Icon Menu
              li.nav-item
                a(data-bs-toggle="collapse", href="#forms")
                  i.fas.fa-pen-square
                  p Forms
                  span.caret
                .collapse#forms
                  ul.nav.nav-collapse
                    li
                      a(href="forms/forms.html")
                        span.sub-item Basic Form
              li.nav-item
                a(data-bs-toggle="collapse", href="#tables")
                  i.fas.fa-table
                  p Tables
                  span.caret
                .collapse#tables
                  ul.nav.nav-collapse
                    li
                      a(href="tables/tables.html")
                        span.sub-item Basic Table
                    li
                      a(href="tables/datatables.html")
                        span.sub-item Datatables
              li.nav-item
                a(data-bs-toggle="collapse", href="#maps")
                  i.fas.fa-map-marker-alt
                  p Maps
                  span.caret
                .collapse#maps
                  ul.nav.nav-collapse
                    li
                      a(href="maps/googlemaps.html")
                        span.sub-item Google Maps
                    li
                      a(href="maps/jsvectormap.html")
                        span.sub-item Jsvectormap
              li.nav-item
                a(data-bs-toggle="collapse", href="#charts")
                  i.far.fa-chart-bar
                  p Charts
                  span.caret
                .collapse#charts
                  ul.nav.nav-collapse
                    li
                      a(href="charts/charts.html")
                        span.sub-item Chart Js
                    li
                      a(href="charts/sparkline.html")
                        span.sub-item Sparkline
              li.nav-item
                a(href="widgets.html")
                  i.fas.fa-desktop
                  p Widgets
                  span.badge.badge-success 4
              li.nav-item
                a(href="http://localhost:8000/admin/Products")
                  i.fas.fa-file
                  p Danh sách sản phẩm
                  span.badge.badge-secondary #{ObjectPagination.CountProduct}
              li.nav-item
                a(data-bs-toggle="collapse", href="#submenu")
                  i.fas.fa-bars
                  p Menu Levels
                  span.caret
                .collapse#submenu
                  ul.nav.nav-collapse
                    li
                      a(data-bs-toggle="collapse", href="#subnav1")
                        span.sub-item Level 1
                        span.caret
                      .collapse#subnav1
                        ul.nav.nav-collapse.subnav
                          li
                            a(href="#")
                              span.sub-item Level 2
                          li
                            a(href="#")
                              span.sub-item Level 2
                    li
                      a(data-bs-toggle="collapse", href="#subnav2")
                        span.sub-item Level 1
                        span.caret
                      .collapse#subnav2
                        ul.nav.nav-collapse.subnav
                          li
                            a(href="#")
                              span.sub-item Level 2
                    li
                      a(href="#")
                        span.sub-item Level 1
      div.main-content                  
        .page-content.page-container#page-content
          div(style="padding-top:25px")
            .row.container.d-flex.justify-content-center.mb-3
              .col-lg-11.d-flex
                .catalogue
                  //-Mixins
                  +FilterStatus(FilterStatus)
            .row.container.d-flex.justify-content-center
              .col-lg-11.grid-margin.stretch-card
                .card
                  .card-body
                    h4.card-title Danh sách
                    .d-flex.align-items-center.choise
                      .form-group
                        select(name="type" class="form-control")
                          option(disabled selected) --Chọn Hành Động--
                          option(value="active") Hoạt Động
                          option(value="inactive") Dừng Hoạt Động
                          option(value="delete-all") Xóa Tất Cả
                      button(type="submit" class="apply btn btn-primary") Áp Dụng
                      button(type="" class="btn btn-primary add-pro") Thêm Sản Phẩm
                      a(href="", class="fa-solid fa-trash trash-icon restore")
                        span(class="count") #{Count_Deleted}
                    +sort()
                    .table-responsive
                      table.table
                        thead
                          tr
                            th
                              label(for)
                              input#checkbox-all(type="checkbox")
                            th index
                            th Imgs
                            th Name
                            th Quantity
                            th Price
                            th Status
                            th action 
                        tbody
                          each item,index in products
                            tr
                              td
                                label(for)
                                input.checkbox(type="checkbox" name="id" value=item._id)
                              td #{ index+1 }
                              td
                                img(src=item.img, alt="")
                              td 
                                a(href=`${prefixAdmin}/Products/${item._id}`) #{item.product_name}
                              td.text-center #{item.quantity}
                              td #{item.Price}
                              td 
                                if(item.status ==="active")
                                  a(href="javascript:;",change-status="",data-status=item.status,data-id=item._id, class="badge badge-success" ) Hoạt Động
                                else
                                  a(href="javascript:;",change-status="",data-status=item.status,data-id=item._id, class="badge badge-danger") Dừng Hoạt Động
                              td
                                a(href=`${prefixAdmin}/edit/${item._id}` class=" btn btn-warning btn-sm m-1 fix") Sửa 
                                button(value=item._id).btn.btn-danger.btn-sm.m-1.delete Xóa
            nav(style="margin-left:35px;padding-bottom:15px")
              //- phân trang 
              ul(class="pagination")
                  if(ObjectPagination.currentPage > 1)
                    li.page-item
                        button.page-link(type="button", button-pagination=ObjectPagination.currentPage-1) Trang trước
                  if (ObjectPagination.currentPage === 1) 
                    //- Khi ở trang 1, hiển thị nút 1, 2, 3
                    - for (var i = 1; i <= 3; i++)
                        li(class=`page-item ${ObjectPagination.currentPage === i ? 'active' : ''}`)
                          button.page-link(type='button', button-pagination=i) #{i}
                  else if(ObjectPagination.currentPage === ObjectPagination.TotalPage) 
                    //- Khi ở trang cuối, hiển thị 2 nút cuối
                    - var startPage = Math.max(ObjectPagination.TotalPage - 2, 1); // Đảm bảo không nhỏ hơn 1
                    - for (var i = startPage; i <= ObjectPagination.TotalPage; i++)
                        li(class=`page-item ${ObjectPagination.currentPage === i ? 'active' : ''}`)
                          button.page-link(type='button', button-pagination=i) #{i}  
                  else if(ObjectPagination.currentPage !== ObjectPagination.TotalPage&&ObjectPagination.currentPage !==1)
                    - var maxpage=ObjectPagination.currentPage+1;
                    - for (var i = ObjectPagination.currentPage-1; i <=maxpage ; i++)
                        li(class=`page-item ${ObjectPagination.currentPage == i ? "active" :""}`)
                          button.page-link(type="button", button-pagination=i) #{i}
                  if(ObjectPagination.currentPage<ObjectPagination.TotalPage)        
                    li.page-item
                      button.page-link(type="button", button-pagination=ObjectPagination.currentPage+1) Trang sau

    
  script(type="module",src="/admin/js/ListProduct.js")
  script(type="module",src="/admin/js/Pagination.js")  
  script(type="module",src="/admin/js/change-status.js")

